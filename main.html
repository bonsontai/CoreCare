<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Menu</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
  <style>
    /* 讓 .section 填滿 iframe 並垂直置中 */
    html,
    body {
      height: 100%;
      margin: 0;
      overflow: hidden;
      /* 隱藏捲軸 */
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #fdfaf5;
      /* 配合 home.html 的風格 */
    }

    .menu-box {
      width: 90%;
      max-width: 500px;
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    /* 讓下拉選單填滿按鈕寬度 */
    .dropdown {
      width: 100%;
    }

    .dropdown-trigger {
      width: 100%;
    }

    .dropdown-trigger .button {
      width: 100%;
    }

    .dropdown-menu {
      width: 100%;
    }
  </style>
</head>

<body>
  <div class="box menu-box">

    <div class="field">
      <button class="button is-primary is-large is-fullwidth" id="person-button">
        個人資料
      </button>
    </div>

    <div class="field">
      <div class="dropdown is-fullwidth" id="training-dropdown">
        <div class="dropdown-trigger">
          <button class="button is-link is-large is-fullwidth" aria-haspopup="true" aria-controls="dropdown-menu">
            <span>開始訓練</span>
            <span class="icon is-small">
              <i class="fas fa-angle-down" aria-hidden="true"></i>
            </span>
          </button>
        </div>
        <div class="dropdown-menu" id="dropdown-menu" role="menu">
          <div class="dropdown-content">
            <a href="#" class="dropdown-item" id="squat-link">
              深蹲訓練
            </a>
            <a href="#" class="dropdown-item" id="kettlebell-link">
              壺鈴訓練
            </a>
            <a href="#" class="dropdown-item" id="leg-lift-link">
              坐姿抬腿訓練
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // --- 控制下拉選單 (使其點擊可開關) ---
      const dropdown = document.getElementById('training-dropdown');
      if (dropdown) {
        const trigger = dropdown.querySelector('.dropdown-trigger .button');
        if (trigger) {
          trigger.addEventListener('click', (event) => {
            event.stopPropagation(); // 防止觸發 body 的點擊
            dropdown.classList.toggle('is-active');
          });
        }
        // 點擊空白處關閉
        document.body.addEventListener('click', () => {
          dropdown.classList.remove('is-active');
        });
      }

      // --- 導航控制 (核心) ---
      // 
      // 我們的策略是：
      // 獲取 "父層頁面" (home.html) 的 document
      // 然後用 JS "點擊" home.html 上的對應按鈕。
      //
      const parentDoc = window.parent.document;

      // 1. "個人資料" 按鈕
      document.getElementById('person-button').addEventListener('click', () => {
        // 找到 index.html 中 [data-src="person.html"] 的按鈕
        const link = parentDoc.getElementById('person-link');
        if (link) {
          link.click(); // 模擬點擊
        } else {
          console.error('在 index.html 中找不到 person.html 的連結');
        }
      });

      // 2. "深蹲訓練" 按鈕
      document.getElementById('squat-link').addEventListener('click', () => {
        // 觸發 index.html 上的 "深蹲訓練" 按鈕
        const link = parentDoc.getElementById('squat-training-link');
        if (link) {
          link.click(); // 這會觸發 home.html 上的 "讀取CSV" 智慧型邏輯
        } else {
          console.error('在 index.html 中找不到 squats/middle.html 的連結');
        }
      });

      // 3. "壺鈴訓練" 按鈕
      document.getElementById('kettlebell-link').addEventListener('click', () => {
        // ↓↓↓ 修正：改為尋找 index.html 上的新 ID ↓↓↓
        const link = parentDoc.getElementById('advances-training-link');
        if (link) {
          link.click(); // 模擬點擊，觸發 index.html 中的動態載入邏輯 (squats_level.js)
        } else {
          console.error('在 index.html 中找不到壺鈴訓練的連結');
        }
      });

      // 4. "坐姿抬腿訓練" 按鈕
      document.getElementById('leg-lift-link').addEventListener('click', () => {
        // ↓↓↓ 修正：改為尋找 index.html 上的新 ID ↓↓↓
        const link = parentDoc.getElementById('sitting-training-link');
        if (link) {
          link.click(); // 模擬點擊，觸發 index.html 中的動態載入邏輯 (squats_level.js)
        } else {
          console.error('在 index.html 中找不到坐姿抬腿訓練的連結');
        }
      });
    });
  </script>

  <script defer src="https://use.fontawesome.com/releases/v6.4.2/js/all.js"></script>
</body>

</html>